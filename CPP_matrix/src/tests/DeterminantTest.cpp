#include <gtest/gtest.h>

#include "../s21_matrix_oop.h"

TEST(Determinant, default_test) {
  S21Matrix left_matrix_1(1, 1);
  S21Matrix left_matrix_2(2, 2);
  S21Matrix left_matrix_3(3, 3);
  S21Matrix left_matrix_4(4, 4);
  S21Matrix left_matrix_5(5, 5);
  S21Matrix left_matrix_6(6, 6);
  S21Matrix left_matrix_7(7, 7);
  S21Matrix left_matrix_8(8, 8);

  left_matrix_1.GetMatrixEl(0, 0) = -1.1342890;
  left_matrix_2.GetMatrixEl(0, 0) = -3.4012997;
  left_matrix_2.GetMatrixEl(0, 1) = -6.5689380;
  left_matrix_2.GetMatrixEl(1, 0) = 2.9962965;
  left_matrix_2.GetMatrixEl(1, 1) = 2.5326122;
  left_matrix_3.GetMatrixEl(0, 0) = 8.5356719;
  left_matrix_3.GetMatrixEl(0, 1) = 0.4910435;
  left_matrix_3.GetMatrixEl(0, 2) = 4.5148695;
  left_matrix_3.GetMatrixEl(1, 0) = 3.7371680;
  left_matrix_3.GetMatrixEl(1, 1) = -5.4049494;
  left_matrix_3.GetMatrixEl(1, 2) = 4.7791066;
  left_matrix_3.GetMatrixEl(2, 0) = -7.6691025;
  left_matrix_3.GetMatrixEl(2, 1) = -0.3226794;
  left_matrix_3.GetMatrixEl(2, 2) = -1.7053318;
  left_matrix_4.GetMatrixEl(0, 0) = 0.6615119;
  left_matrix_4.GetMatrixEl(0, 1) = -6.6579154;
  left_matrix_4.GetMatrixEl(0, 2) = -0.5966543;
  left_matrix_4.GetMatrixEl(0, 3) = -1.7549017;
  left_matrix_4.GetMatrixEl(1, 0) = -4.5853175;
  left_matrix_4.GetMatrixEl(1, 1) = 2.1449718;
  left_matrix_4.GetMatrixEl(1, 2) = -4.5004891;
  left_matrix_4.GetMatrixEl(1, 3) = -4.2222854;
  left_matrix_4.GetMatrixEl(2, 0) = -2.1373333;
  left_matrix_4.GetMatrixEl(2, 1) = 4.1924552;
  left_matrix_4.GetMatrixEl(2, 2) = 7.7753716;
  left_matrix_4.GetMatrixEl(2, 3) = -4.1249435;
  left_matrix_4.GetMatrixEl(3, 0) = 8.1002487;
  left_matrix_4.GetMatrixEl(3, 1) = 7.7600128;
  left_matrix_4.GetMatrixEl(3, 2) = -8.4265028;
  left_matrix_4.GetMatrixEl(3, 3) = -8.6814753;
  left_matrix_5.GetMatrixEl(0, 0) = -5.7257219;
  left_matrix_5.GetMatrixEl(0, 1) = 7.4731902;
  left_matrix_5.GetMatrixEl(0, 2) = -5.6507571;
  left_matrix_5.GetMatrixEl(0, 3) = -4.4671067;
  left_matrix_5.GetMatrixEl(0, 4) = 3.6534281;
  left_matrix_5.GetMatrixEl(1, 0) = 6.2958612;
  left_matrix_5.GetMatrixEl(1, 1) = 0.6666696;
  left_matrix_5.GetMatrixEl(1, 2) = -4.1378765;
  left_matrix_5.GetMatrixEl(1, 3) = 0.6422263;
  left_matrix_5.GetMatrixEl(1, 4) = -6.6806972;
  left_matrix_5.GetMatrixEl(2, 0) = 3.7901003;
  left_matrix_5.GetMatrixEl(2, 1) = -4.7944208;
  left_matrix_5.GetMatrixEl(2, 2) = 1.5533694;
  left_matrix_5.GetMatrixEl(2, 3) = -1.0922977;
  left_matrix_5.GetMatrixEl(2, 4) = -8.3765253;
  left_matrix_5.GetMatrixEl(3, 0) = 1.6032754;
  left_matrix_5.GetMatrixEl(3, 1) = 5.2595871;
  left_matrix_5.GetMatrixEl(3, 2) = 3.4853179;
  left_matrix_5.GetMatrixEl(3, 3) = -3.0742176;
  left_matrix_5.GetMatrixEl(3, 4) = 6.4610030;
  left_matrix_5.GetMatrixEl(4, 0) = -4.5016912;
  left_matrix_5.GetMatrixEl(4, 1) = -3.3034284;
  left_matrix_5.GetMatrixEl(4, 2) = 7.4069921;
  left_matrix_5.GetMatrixEl(4, 3) = -3.4141413;
  left_matrix_5.GetMatrixEl(4, 4) = 0.6714160;
  left_matrix_6.GetMatrixEl(0, 0) = 2.4831278;
  left_matrix_6.GetMatrixEl(0, 1) = -6.4058252;
  left_matrix_6.GetMatrixEl(0, 2) = -7.0087398;
  left_matrix_6.GetMatrixEl(0, 3) = 6.5784919;
  left_matrix_6.GetMatrixEl(0, 4) = 2.4799720;
  left_matrix_6.GetMatrixEl(0, 5) = 5.9555323;
  left_matrix_6.GetMatrixEl(1, 0) = -7.7968034;
  left_matrix_6.GetMatrixEl(1, 1) = -3.4955315;
  left_matrix_6.GetMatrixEl(1, 2) = 7.7406982;
  left_matrix_6.GetMatrixEl(1, 3) = -1.6203155;
  left_matrix_6.GetMatrixEl(1, 4) = -4.6186508;
  left_matrix_6.GetMatrixEl(1, 5) = 1.6253501;
  left_matrix_6.GetMatrixEl(2, 0) = 5.6833065;
  left_matrix_6.GetMatrixEl(2, 1) = -6.6323957;
  left_matrix_6.GetMatrixEl(2, 2) = -3.4549151;
  left_matrix_6.GetMatrixEl(2, 3) = -3.0866179;
  left_matrix_6.GetMatrixEl(2, 4) = 2.8678888;
  left_matrix_6.GetMatrixEl(2, 5) = -7.5628998;
  left_matrix_6.GetMatrixEl(3, 0) = -7.5720592;
  left_matrix_6.GetMatrixEl(3, 1) = -3.0929292;
  left_matrix_6.GetMatrixEl(3, 2) = -4.3948783;
  left_matrix_6.GetMatrixEl(3, 3) = 8.6114760;
  left_matrix_6.GetMatrixEl(3, 4) = 1.6014523;
  left_matrix_6.GetMatrixEl(3, 5) = -6.3654926;
  left_matrix_6.GetMatrixEl(4, 0) = 0.9094760;
  left_matrix_6.GetMatrixEl(4, 1) = 2.6367571;
  left_matrix_6.GetMatrixEl(4, 2) = 4.9435352;
  left_matrix_6.GetMatrixEl(4, 3) = -3.7086723;
  left_matrix_6.GetMatrixEl(4, 4) = -0.8130787;
  left_matrix_6.GetMatrixEl(4, 5) = -8.7155863;
  left_matrix_6.GetMatrixEl(5, 0) = -8.8287583;
  left_matrix_6.GetMatrixEl(5, 1) = 6.5677595;
  left_matrix_6.GetMatrixEl(5, 2) = -8.5761870;
  left_matrix_6.GetMatrixEl(5, 3) = 6.9004907;
  left_matrix_6.GetMatrixEl(5, 4) = -4.4512686;
  left_matrix_6.GetMatrixEl(5, 5) = -1.0381220;
  left_matrix_7.GetMatrixEl(0, 0) = 8.5152496;
  left_matrix_7.GetMatrixEl(0, 1) = -1.2443476;
  left_matrix_7.GetMatrixEl(0, 2) = 5.9833009;
  left_matrix_7.GetMatrixEl(0, 3) = 5.3784556;
  left_matrix_7.GetMatrixEl(0, 4) = -3.8851344;
  left_matrix_7.GetMatrixEl(0, 5) = 2.5406243;
  left_matrix_7.GetMatrixEl(0, 6) = 4.1529233;
  left_matrix_7.GetMatrixEl(1, 0) = 4.6400564;
  left_matrix_7.GetMatrixEl(1, 1) = 2.7529993;
  left_matrix_7.GetMatrixEl(1, 2) = -0.6521810;
  left_matrix_7.GetMatrixEl(1, 3) = -3.3613007;
  left_matrix_7.GetMatrixEl(1, 4) = 1.9136358;
  left_matrix_7.GetMatrixEl(1, 5) = 3.4048287;
  left_matrix_7.GetMatrixEl(1, 6) = -6.8494647;
  left_matrix_7.GetMatrixEl(2, 0) = -8.4325686;
  left_matrix_7.GetMatrixEl(2, 1) = 8.5364144;
  left_matrix_7.GetMatrixEl(2, 2) = -7.6549292;
  left_matrix_7.GetMatrixEl(2, 3) = -8.0857279;
  left_matrix_7.GetMatrixEl(2, 4) = 0.4240583;
  left_matrix_7.GetMatrixEl(2, 5) = 1.1608431;
  left_matrix_7.GetMatrixEl(2, 6) = 6.7909397;
  left_matrix_7.GetMatrixEl(3, 0) = 0.2359755;
  left_matrix_7.GetMatrixEl(3, 1) = -6.2723448;
  left_matrix_7.GetMatrixEl(3, 2) = -6.5163177;
  left_matrix_7.GetMatrixEl(3, 3) = -4.4625539;
  left_matrix_7.GetMatrixEl(3, 4) = -7.3479153;
  left_matrix_7.GetMatrixEl(3, 5) = -6.5016861;
  left_matrix_7.GetMatrixEl(3, 6) = 2.1250222;
  left_matrix_7.GetMatrixEl(4, 0) = 3.4475893;
  left_matrix_7.GetMatrixEl(4, 1) = 0.2369384;
  left_matrix_7.GetMatrixEl(4, 2) = -7.5380653;
  left_matrix_7.GetMatrixEl(4, 3) = -3.8244515;
  left_matrix_7.GetMatrixEl(4, 4) = 7.3865578;
  left_matrix_7.GetMatrixEl(4, 5) = -6.2866645;
  left_matrix_7.GetMatrixEl(4, 6) = -4.3229501;
  left_matrix_7.GetMatrixEl(5, 0) = -4.7671283;
  left_matrix_7.GetMatrixEl(5, 1) = 7.8744870;
  left_matrix_7.GetMatrixEl(5, 2) = 1.4665726;
  left_matrix_7.GetMatrixEl(5, 3) = 5.4511120;
  left_matrix_7.GetMatrixEl(5, 4) = -2.0082388;
  left_matrix_7.GetMatrixEl(5, 5) = -6.0645629;
  left_matrix_7.GetMatrixEl(5, 6) = 6.3762832;
  left_matrix_7.GetMatrixEl(6, 0) = 0.7404465;
  left_matrix_7.GetMatrixEl(6, 1) = 3.1635700;
  left_matrix_7.GetMatrixEl(6, 2) = -8.4935511;
  left_matrix_7.GetMatrixEl(6, 3) = 1.3888328;
  left_matrix_7.GetMatrixEl(6, 4) = 8.6486263;
  left_matrix_7.GetMatrixEl(6, 5) = 1.3249620;
  left_matrix_7.GetMatrixEl(6, 6) = 5.8706088;
  left_matrix_8.GetMatrixEl(0, 0) = 4.2463726;
  left_matrix_8.GetMatrixEl(0, 1) = 4.6307811;
  left_matrix_8.GetMatrixEl(0, 2) = 2.5505518;
  left_matrix_8.GetMatrixEl(0, 3) = 6.1230794;
  left_matrix_8.GetMatrixEl(0, 4) = -1.8284323;
  left_matrix_8.GetMatrixEl(0, 5) = 5.1874338;
  left_matrix_8.GetMatrixEl(0, 6) = -0.1902512;
  left_matrix_8.GetMatrixEl(0, 7) = -3.6937951;
  left_matrix_8.GetMatrixEl(1, 0) = -4.5809870;
  left_matrix_8.GetMatrixEl(1, 1) = -3.0082704;
  left_matrix_8.GetMatrixEl(1, 2) = 6.7410146;
  left_matrix_8.GetMatrixEl(1, 3) = 2.3832643;
  left_matrix_8.GetMatrixEl(1, 4) = -3.7430535;
  left_matrix_8.GetMatrixEl(1, 5) = 3.8157735;
  left_matrix_8.GetMatrixEl(1, 6) = -4.8597137;
  left_matrix_8.GetMatrixEl(1, 7) = 4.9906677;
  left_matrix_8.GetMatrixEl(2, 0) = 1.5801282;
  left_matrix_8.GetMatrixEl(2, 1) = 6.3630774;
  left_matrix_8.GetMatrixEl(2, 2) = 7.5186345;
  left_matrix_8.GetMatrixEl(2, 3) = -5.3885626;
  left_matrix_8.GetMatrixEl(2, 4) = -0.1950391;
  left_matrix_8.GetMatrixEl(2, 5) = 5.3968550;
  left_matrix_8.GetMatrixEl(2, 6) = -3.5809090;
  left_matrix_8.GetMatrixEl(2, 7) = 4.7374591;
  left_matrix_8.GetMatrixEl(3, 0) = -5.0947669;
  left_matrix_8.GetMatrixEl(3, 1) = 0.1216090;
  left_matrix_8.GetMatrixEl(3, 2) = 4.2375050;
  left_matrix_8.GetMatrixEl(3, 3) = 4.8000497;
  left_matrix_8.GetMatrixEl(3, 4) = -3.4741684;
  left_matrix_8.GetMatrixEl(3, 5) = 4.6170371;
  left_matrix_8.GetMatrixEl(3, 6) = -7.8205255;
  left_matrix_8.GetMatrixEl(3, 7) = 8.3982231;
  left_matrix_8.GetMatrixEl(4, 0) = 0.1037560;
  left_matrix_8.GetMatrixEl(4, 1) = -7.7155581;
  left_matrix_8.GetMatrixEl(4, 2) = -6.0809211;
  left_matrix_8.GetMatrixEl(4, 3) = 4.2503118;
  left_matrix_8.GetMatrixEl(4, 4) = -6.7088790;
  left_matrix_8.GetMatrixEl(4, 5) = 7.8377319;
  left_matrix_8.GetMatrixEl(4, 6) = -4.4261587;
  left_matrix_8.GetMatrixEl(4, 7) = -1.4741576;
  left_matrix_8.GetMatrixEl(5, 0) = -1.5158175;
  left_matrix_8.GetMatrixEl(5, 1) = -5.3676942;
  left_matrix_8.GetMatrixEl(5, 2) = 7.7070354;
  left_matrix_8.GetMatrixEl(5, 3) = 1.5701375;
  left_matrix_8.GetMatrixEl(5, 4) = -1.7202942;
  left_matrix_8.GetMatrixEl(5, 5) = -5.7683799;
  left_matrix_8.GetMatrixEl(5, 6) = -4.4451545;
  left_matrix_8.GetMatrixEl(5, 7) = 4.4255363;
  left_matrix_8.GetMatrixEl(6, 0) = 2.2249806;
  left_matrix_8.GetMatrixEl(6, 1) = -0.7382338;
  left_matrix_8.GetMatrixEl(6, 2) = -3.8317542;
  left_matrix_8.GetMatrixEl(6, 3) = 6.9569211;
  left_matrix_8.GetMatrixEl(6, 4) = 6.6582780;
  left_matrix_8.GetMatrixEl(6, 5) = -7.4558292;
  left_matrix_8.GetMatrixEl(6, 6) = -3.8120964;
  left_matrix_8.GetMatrixEl(6, 7) = -2.0375243;
  left_matrix_8.GetMatrixEl(7, 0) = -8.0945183;
  left_matrix_8.GetMatrixEl(7, 1) = -1.7471104;
  left_matrix_8.GetMatrixEl(7, 2) = -0.4257533;
  left_matrix_8.GetMatrixEl(7, 3) = -7.0623725;
  left_matrix_8.GetMatrixEl(7, 4) = -7.6759683;
  left_matrix_8.GetMatrixEl(7, 5) = 7.8616548;
  left_matrix_8.GetMatrixEl(7, 6) = 0.5820927;
  left_matrix_8.GetMatrixEl(7, 7) = 8.8412156;

  EXPECT_FLOAT_EQ(-1.1342890, left_matrix_1.Determinant());
  EXPECT_FLOAT_EQ(11.0683128, left_matrix_2.Determinant());
  EXPECT_FLOAT_EQ(-115.6205625, left_matrix_3.Determinant());
  EXPECT_FLOAT_EQ(7317.7822473, left_matrix_4.Determinant());
  EXPECT_FLOAT_EQ(4115.5935021, left_matrix_5.Determinant());
  EXPECT_FLOAT_EQ(-409676.9976108, left_matrix_6.Determinant());
  EXPECT_FLOAT_EQ(11364183.3137513, left_matrix_7.Determinant());
  EXPECT_FLOAT_EQ(1916036.1862601, left_matrix_8.Determinant());
}

TEST(Determinant, throw_exception_test) {
  S21Matrix matrix(3, 4);
  EXPECT_THROW(
      try { matrix.Determinant(); } catch (const domain_error &e) {
        EXPECT_STREQ("The matrix is not square.", e.what());
        throw;
      },
      domain_error);
}

TEST(Determinant, zero_diagonal) {
  S21Matrix matrix(3, 3);
  EXPECT_EQ(matrix.Determinant(), 0.);
}